# Test: 
#
# Commands:
#
#   ./setup-testbed.sh -d /tmp/lazyfs/fb-workload -f filemicro_rread.f.f
#   filebench -f filemicro_rread.f.f
#
# Description:
#
#   (Using page size in cache of size 32kb / 32768 bytes)
# 
#   1. Clear all files from FS
#   2. Run filebench filemicro_rread.f.f
#   3. Get results

# Run 1


# Run 2


# Run 3

# lazyfs run number 1

Filebench Version 1.5-alpha3
0.000: Allocated 177MB of shared memory
0.001: Populating and pre-allocating filesets
0.001: fileset-1 populated: 1 files, avg. dir. width = 1, avg. dir. depth = -nan, 0 leafdirs, 1024.000MB total size
0.001: Removing fileset-1 tree (if exists)
0.002: Pre-allocating directories in fileset-1 tree
0.003: Pre-allocating files in fileset-1 tree
1.958: Waiting for pre-allocation to finish (in case of a parallel pre-allocation)
1.958: Population and pre-allocation of filesets completed
1.958: Attempting to create fileset more than once, ignoring
1.958: Starting 1 process-1 instances
2.960: Running...
175.975: Run took 173 seconds...
175.975: Per-Operation Breakdown
finish-1             1ops        0ops/s   0.0mb/s    0.000ms/op [0.000ms - 0.000ms]
close-1              1ops        0ops/s   0.0mb/s    0.012ms/op [0.012ms - 0.012ms]
read-1               67108864ops   387880ops/s 1515.2mb/s    0.001ms/op [0.001ms - 10.771ms]
open-1               1ops        0ops/s   0.0mb/s   67.988ms/op [67.988ms - 67.988ms]
175.975: IO Summary: 67108866 ops 387880.310 ops/s 387880/0 rd/wr 1515.2mb/s 0.001ms/op
175.975: Shutting down processes

# lazyfs run number 2

Filebench Version 1.5-alpha3
0.000: Allocated 177MB of shared memory
0.001: Populating and pre-allocating filesets
0.001: fileset-1 populated: 1 files, avg. dir. width = 1, avg. dir. depth = -nan, 0 leafdirs, 1024.000MB total size
0.001: Removing fileset-1 tree (if exists)
0.002: Pre-allocating directories in fileset-1 tree
0.003: Pre-allocating files in fileset-1 tree
1.409: Waiting for pre-allocation to finish (in case of a parallel pre-allocation)
1.409: Population and pre-allocation of filesets completed
1.409: Attempting to create fileset more than once, ignoring
1.410: Starting 1 process-1 instances
2.412: Running...
176.424: Run took 174 seconds...
176.424: Per-Operation Breakdown
finish-1             1ops        0ops/s   0.0mb/s    0.000ms/op [0.000ms - 0.000ms]
close-1              1ops        0ops/s   0.0mb/s    0.011ms/op [0.011ms - 0.011ms]
read-1               67108864ops   385656ops/s 1506.5mb/s    0.001ms/op [0.001ms - 10.767ms]
open-1               1ops        0ops/s   0.0mb/s   65.814ms/op [65.814ms - 65.814ms]
176.424: IO Summary: 67108866 ops 385656.036 ops/s 385656/0 rd/wr 1506.5mb/s 0.001ms/op
176.424: Shutting down processes

# lazyfs run number 3

Filebench Version 1.5-alpha3
0.000: Allocated 177MB of shared memory
0.001: Populating and pre-allocating filesets
0.001: fileset-1 populated: 1 files, avg. dir. width = 1, avg. dir. depth = -nan, 0 leafdirs, 1024.000MB total size
0.001: Removing fileset-1 tree (if exists)
0.002: Pre-allocating directories in fileset-1 tree
0.003: Pre-allocating files in fileset-1 tree
1.743: Waiting for pre-allocation to finish (in case of a parallel pre-allocation)
1.743: Population and pre-allocation of filesets completed
1.743: Attempting to create fileset more than once, ignoring
1.744: Starting 1 process-1 instances
2.746: Running...
174.760: Run took 172 seconds...
174.760: Per-Operation Breakdown
finish-1             1ops        0ops/s   0.0mb/s    0.000ms/op [0.000ms - 0.000ms]
close-1              1ops        0ops/s   0.0mb/s    0.013ms/op [0.013ms - 0.013ms]
read-1               67108864ops   390136ops/s 1524.0mb/s    0.001ms/op [0.001ms - 10.516ms]
open-1               1ops        0ops/s   0.0mb/s   65.048ms/op [65.048ms - 65.048ms]
174.760: IO Summary: 67108866 ops 390135.678 ops/s 390136/0 rd/wr 1524.0mb/s 0.001ms/op
174.760: Shutting down processes
