# Test: 
#
# Commands:
#
#   ./setup-testbed.sh -d /tmp/lazyfs/fb-workload -f filemicro_rwrite.f.f
#   filebench -f filemicro_rwrite.f.f
#
# Description:
#
#   (Using standard page size in cache - 4kb / 4096 bytes)
# 
#   1. Clear all files from FS
#   2. Run filebench filemicro_rwrite.f.f
#   3. Get results

# Run 1


# Run 2


# Run 3


# lazyfs run number 1

Filebench Version 1.5-alpha3
0.000: Allocated 177MB of shared memory
0.001: Populating and pre-allocating filesets
0.001: fileset-1 populated: 1 files, avg. dir. width = 1, avg. dir. depth = -nan, 0 leafdirs, 1024.000MB total size
0.001: Removing fileset-1 tree (if exists)
0.002: Pre-allocating directories in fileset-1 tree
0.003: Pre-allocating files in fileset-1 tree
6.439: Waiting for pre-allocation to finish (in case of a parallel pre-allocation)
6.439: Population and pre-allocation of filesets completed
6.439: performing a checkpoint...
6.440: Sleeping...
16.441: Slept for 10 seconds...
16.586: clearing cached data...
16.588: Sleeping...
26.589: Slept for 10 seconds...
26.754: time sync
time sync 1651237095.253831287
26.767: time sync
26.767: current cache usage...
26.768: Attempting to create fileset more than once, ignoring
26.768: Starting 1 process-1 instances
27.796: Running...
327.816: Run took 300 seconds...
327.816: Per-Operation Breakdown
finish-1             0ops        0ops/s   0.0mb/s    0.000ms/op [0.000ms - 0.000ms]
close-1              0ops        0ops/s   0.0mb/s    0.000ms/op [0.000ms - 0.000ms]
write-1              6935081ops    23115ops/s  90.3mb/s    0.042ms/op [0.026ms - 62.614ms]
open-1               1ops        0ops/s   0.0mb/s   34.065ms/op [34.065ms - 34.065ms]
327.816: IO Summary: 6935082 ops 23115.470 ops/s 0/23115 rd/wr  90.3mb/s 0.042ms/op
327.816: Shutting down processes

# lazyfs run number 2

Filebench Version 1.5-alpha3
0.000: Allocated 177MB of shared memory
0.001: Populating and pre-allocating filesets
0.001: fileset-1 populated: 1 files, avg. dir. width = 1, avg. dir. depth = -nan, 0 leafdirs, 1024.000MB total size
0.001: Removing fileset-1 tree (if exists)
0.002: Pre-allocating directories in fileset-1 tree
0.003: Pre-allocating files in fileset-1 tree
6.314: Waiting for pre-allocation to finish (in case of a parallel pre-allocation)
6.314: Population and pre-allocation of filesets completed
6.314: performing a checkpoint...
6.315: Sleeping...
16.316: Slept for 10 seconds...
16.317: clearing cached data...
16.318: Sleeping...
26.320: Slept for 10 seconds...
26.486: time sync
time sync 1651237449.044748560
26.499: time sync
26.499: current cache usage...
26.500: Attempting to create fileset more than once, ignoring
26.500: Starting 1 process-1 instances
27.508: Running...
327.528: Run took 300 seconds...
327.528: Per-Operation Breakdown
finish-1             0ops        0ops/s   0.0mb/s    0.000ms/op [0.000ms - 0.000ms]
close-1              0ops        0ops/s   0.0mb/s    0.000ms/op [0.000ms - 0.000ms]
write-1              7088076ops    23625ops/s  92.3mb/s    0.041ms/op [0.025ms - 64.018ms]
open-1               1ops        0ops/s   0.0mb/s   29.154ms/op [29.154ms - 29.154ms]
327.528: IO Summary: 7088077 ops 23625.419 ops/s 0/23625 rd/wr  92.3mb/s 0.041ms/op
327.528: Shutting down processes

# lazyfs run number 3

Filebench Version 1.5-alpha3
0.000: Allocated 177MB of shared memory
0.001: Populating and pre-allocating filesets
0.001: fileset-1 populated: 1 files, avg. dir. width = 1, avg. dir. depth = -nan, 0 leafdirs, 1024.000MB total size
0.001: Removing fileset-1 tree (if exists)
0.002: Pre-allocating directories in fileset-1 tree
0.003: Pre-allocating files in fileset-1 tree
6.084: Waiting for pre-allocation to finish (in case of a parallel pre-allocation)
6.084: Population and pre-allocation of filesets completed
6.084: performing a checkpoint...
6.084: Sleeping...
16.086: Slept for 10 seconds...
16.086: clearing cached data...
16.088: Sleeping...
26.089: Slept for 10 seconds...
26.246: time sync
time sync 1651237802.583748775
26.258: time sync
26.259: current cache usage...
26.259: Attempting to create fileset more than once, ignoring
26.259: Starting 1 process-1 instances
27.267: Running...
327.287: Run took 300 seconds...
327.287: Per-Operation Breakdown
finish-1             0ops        0ops/s   0.0mb/s    0.000ms/op [0.000ms - 0.000ms]
close-1              0ops        0ops/s   0.0mb/s    0.000ms/op [0.000ms - 0.000ms]
write-1              7007851ops    23358ops/s  91.2mb/s    0.041ms/op [0.025ms - 62.478ms]
open-1               1ops        0ops/s   0.0mb/s   34.291ms/op [34.291ms - 34.291ms]
327.287: IO Summary: 7007852 ops 23358.022 ops/s 0/23358 rd/wr  91.2mb/s 0.041ms/op
327.287: Shutting down processes
