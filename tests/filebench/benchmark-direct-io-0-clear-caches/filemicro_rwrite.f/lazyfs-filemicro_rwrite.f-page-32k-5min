# Test: 
#
# Commands:
#
#   ./setup-testbed.sh -d /tmp/lazyfs/fb-workload -f filemicro_rwrite.f.f
#   filebench -f filemicro_rwrite.f.f
#
# Description:
#
#   (Using page size in cache of size 32kb / 32768 bytes)
# 
#   1. Clear all files from FS
#   2. Run filebench filemicro_rwrite.f.f
#   3. Get results

# Run 1


# Run 2


# Run 3


# lazyfs run number 1

Filebench Version 1.5-alpha3
0.000: Allocated 177MB of shared memory
0.001: Populating and pre-allocating filesets
0.001: fileset-1 populated: 1 files, avg. dir. width = 1, avg. dir. depth = -nan, 0 leafdirs, 1024.000MB total size
0.001: Removing fileset-1 tree (if exists)
0.002: Pre-allocating directories in fileset-1 tree
0.003: Pre-allocating files in fileset-1 tree
2.317: Waiting for pre-allocation to finish (in case of a parallel pre-allocation)
2.317: Population and pre-allocation of filesets completed
2.317: performing a checkpoint...
2.318: Sleeping...
12.320: Slept for 10 seconds...
12.320: clearing cached data...
12.322: Sleeping...
22.323: Slept for 10 seconds...
22.486: time sync
time sync 1651265946.705976997
22.498: time sync
22.498: current cache usage...
22.499: Attempting to create fileset more than once, ignoring
22.499: Starting 1 process-1 instances
23.512: Running...
323.531: Run took 300 seconds...
323.531: Per-Operation Breakdown
finish-1             0ops        0ops/s   0.0mb/s    0.000ms/op [0.000ms - 0.000ms]
close-1              0ops        0ops/s   0.0mb/s    0.000ms/op [0.000ms - 0.000ms]
write-1              7666590ops    25554ops/s  99.8mb/s    0.037ms/op [0.025ms - 24.929ms]
open-1               1ops        0ops/s   0.0mb/s    9.562ms/op [9.562ms - 9.562ms]
323.531: IO Summary: 7666591 ops 25553.672 ops/s 0/25554 rd/wr  99.8mb/s 0.037ms/op
323.531: Shutting down processes

# lazyfs run number 2

Filebench Version 1.5-alpha3
0.000: Allocated 177MB of shared memory
0.001: Populating and pre-allocating filesets
0.001: fileset-1 populated: 1 files, avg. dir. width = 1, avg. dir. depth = -nan, 0 leafdirs, 1024.000MB total size
0.001: Removing fileset-1 tree (if exists)
0.003: Pre-allocating directories in fileset-1 tree
0.003: Pre-allocating files in fileset-1 tree
2.390: Waiting for pre-allocation to finish (in case of a parallel pre-allocation)
2.390: Population and pre-allocation of filesets completed
2.390: performing a checkpoint...
2.391: Sleeping...
12.392: Slept for 10 seconds...
12.392: clearing cached data...
12.395: Sleeping...
22.396: Slept for 10 seconds...
22.557: time sync
time sync 1651266296.608552932
22.571: time sync
22.571: current cache usage...
22.571: Attempting to create fileset more than once, ignoring
22.572: Starting 1 process-1 instances
23.580: Running...
323.599: Run took 300 seconds...
323.599: Per-Operation Breakdown
finish-1             0ops        0ops/s   0.0mb/s    0.000ms/op [0.000ms - 0.000ms]
close-1              0ops        0ops/s   0.0mb/s    0.000ms/op [0.000ms - 0.000ms]
write-1              7679900ops    25598ops/s 100.0mb/s    0.037ms/op [0.026ms - 7.943ms]
open-1               1ops        0ops/s   0.0mb/s    3.048ms/op [3.048ms - 3.048ms]
323.599: IO Summary: 7679901 ops 25598.024 ops/s 0/25598 rd/wr 100.0mb/s 0.037ms/op
323.599: Shutting down processes

# lazyfs run number 3

Filebench Version 1.5-alpha3
0.000: Allocated 177MB of shared memory
0.001: Populating and pre-allocating filesets
0.001: fileset-1 populated: 1 files, avg. dir. width = 1, avg. dir. depth = -nan, 0 leafdirs, 1024.000MB total size
0.001: Removing fileset-1 tree (if exists)
0.002: Pre-allocating directories in fileset-1 tree
0.003: Pre-allocating files in fileset-1 tree
1.510: Waiting for pre-allocation to finish (in case of a parallel pre-allocation)
1.510: Population and pre-allocation of filesets completed
1.510: performing a checkpoint...
1.510: Sleeping...
11.512: Slept for 10 seconds...
11.512: clearing cached data...
11.514: Sleeping...
21.515: Slept for 10 seconds...
21.681: time sync
time sync 1651266645.586382582
21.695: time sync
21.695: current cache usage...
21.695: Attempting to create fileset more than once, ignoring
21.696: Starting 1 process-1 instances
22.719: Running...
322.739: Run took 300 seconds...
322.739: Per-Operation Breakdown
finish-1             0ops        0ops/s   0.0mb/s    0.000ms/op [0.000ms - 0.000ms]
close-1              0ops        0ops/s   0.0mb/s    0.000ms/op [0.000ms - 0.000ms]
write-1              7683155ops    25609ops/s 100.0mb/s    0.037ms/op [0.026ms - 7.855ms]
open-1               1ops        0ops/s   0.0mb/s    3.778ms/op [3.778ms - 3.778ms]
322.739: IO Summary: 7683156 ops 25608.866 ops/s 0/25609 rd/wr 100.0mb/s 0.037ms/op
322.739: Shutting down processes
