# Test: 
#
# Commands:
#
#   ./setup-testbed.sh -d /tmp/lazyfs/fb-workload -f filemicro_seqread.f.f
#   filebench -f filemicro_seqread.f.f
#
# Description:
#
#   (Using page size in cache of size 32kb / 32768 bytes)
# 
#   1. Clear all files from FS
#   2. Run filebench filemicro_seqread.f.f
#   3. Get results

# Run 1


# Run 2


# Run 3


# lazyfs run number 1

Filebench Version 1.5-alpha3
0.000: Allocated 177MB of shared memory
0.001: Populating and pre-allocating filesets
0.001: fileset-1 populated: 1 files, avg. dir. width = 1, avg. dir. depth = -nan, 0 leafdirs, 1024.000MB total size
0.001: Removing fileset-1 tree (if exists)
0.002: Pre-allocating directories in fileset-1 tree
0.003: Pre-allocating files in fileset-1 tree
2.282: Waiting for pre-allocation to finish (in case of a parallel pre-allocation)
2.282: Population and pre-allocation of filesets completed
2.283: performing a checkpoint...
2.283: Sleeping...
12.285: Slept for 10 seconds...
12.285: clearing cached data...
12.287: Sleeping...
22.289: Slept for 10 seconds...
22.397: time sync
time sync 1651265346.665718412
22.409: time sync
22.409: current cache usage...
22.410: Attempting to create fileset more than once, ignoring
22.410: Starting 1 process-1 instances
23.419: Running...
163.430: Run took 140 seconds...
163.430: Per-Operation Breakdown
finish-1             0ops        0ops/s   0.0mb/s    0.000ms/op [0.000ms - 0.000ms]
close-1              0ops        0ops/s   0.0mb/s    0.000ms/op [0.000ms - 0.000ms]
read-1               63636443ops   454509ops/s 1775.4mb/s    0.001ms/op [0.001ms - 55.008ms]
open-1               1ops        0ops/s   0.0mb/s    2.955ms/op [2.955ms - 2.955ms]
163.430: IO Summary: 63636444 ops 454508.580 ops/s 454509/0 rd/wr 1775.4mb/s 0.001ms/op
163.430: Shutting down processes

# lazyfs run number 2

Filebench Version 1.5-alpha3
0.000: Allocated 177MB of shared memory
0.001: Populating and pre-allocating filesets
0.001: fileset-1 populated: 1 files, avg. dir. width = 1, avg. dir. depth = -nan, 0 leafdirs, 1024.000MB total size
0.001: Removing fileset-1 tree (if exists)
0.002: Pre-allocating directories in fileset-1 tree
0.003: Pre-allocating files in fileset-1 tree
2.111: Waiting for pre-allocation to finish (in case of a parallel pre-allocation)
2.111: Population and pre-allocation of filesets completed
2.111: performing a checkpoint...
2.112: Sleeping...
12.113: Slept for 10 seconds...
12.113: clearing cached data...
12.115: Sleeping...
22.117: Slept for 10 seconds...
22.279: time sync
time sync 1651265536.232477179
22.292: time sync
22.292: current cache usage...
22.293: Attempting to create fileset more than once, ignoring
22.293: Starting 1 process-1 instances
23.303: Running...
163.315: Run took 140 seconds...
163.315: Per-Operation Breakdown
finish-1             0ops        0ops/s   0.0mb/s    0.000ms/op [0.000ms - 0.000ms]
close-1              0ops        0ops/s   0.0mb/s    0.000ms/op [0.000ms - 0.000ms]
read-1               64380334ops   459823ops/s 1796.2mb/s    0.001ms/op [0.001ms - 27.642ms]
open-1               1ops        0ops/s   0.0mb/s    3.459ms/op [3.459ms - 3.459ms]
163.315: IO Summary: 64380335 ops 459822.678 ops/s 459823/0 rd/wr 1796.2mb/s 0.001ms/op
163.315: Shutting down processes

# lazyfs run number 3

Filebench Version 1.5-alpha3
0.000: Allocated 177MB of shared memory
0.001: Populating and pre-allocating filesets
0.001: fileset-1 populated: 1 files, avg. dir. width = 1, avg. dir. depth = -nan, 0 leafdirs, 1024.000MB total size
0.001: Removing fileset-1 tree (if exists)
0.002: Pre-allocating directories in fileset-1 tree
0.003: Pre-allocating files in fileset-1 tree
2.192: Waiting for pre-allocation to finish (in case of a parallel pre-allocation)
2.192: Population and pre-allocation of filesets completed
2.192: performing a checkpoint...
2.192: Sleeping...
12.194: Slept for 10 seconds...
12.194: clearing cached data...
12.196: Sleeping...
22.198: Slept for 10 seconds...
22.435: time sync
time sync 1651265726.676176308
23.379: time sync
23.379: current cache usage...
23.381: Attempting to create fileset more than once, ignoring
23.382: Starting 1 process-1 instances
24.472: Running...
164.483: Run took 140 seconds...
164.483: Per-Operation Breakdown
finish-1             0ops        0ops/s   0.0mb/s    0.000ms/op [0.000ms - 0.000ms]
close-1              0ops        0ops/s   0.0mb/s    0.000ms/op [0.000ms - 0.000ms]
read-1               62181186ops   444115ops/s 1734.8mb/s    0.001ms/op [0.001ms - 29.850ms]
open-1               1ops        0ops/s   0.0mb/s    2.678ms/op [2.678ms - 2.678ms]
164.483: IO Summary: 62181187 ops 444115.280 ops/s 444115/0 rd/wr 1734.8mb/s 0.001ms/op
164.483: Shutting down processes
