# Test: 
#
# Commands:
#
#   ./setup-testbed.sh -d /tmp/lazyfs/fb-workload -f filemicro_seqread.f.f
#   filebench -f filemicro_seqread.f.f
#
# Description:
#
#   (Using standard page size in cache - 4kb / 4096 bytes)
# 
#   1. Clear all files from FS
#   2. Run filebench filemicro_seqread.f.f
#   3. Get results

# Run 1


# Run 2


# Run 3


# lazyfs run number 1

Filebench Version 1.5-alpha3
0.000: Allocated 177MB of shared memory
0.001: Populating and pre-allocating filesets
0.001: fileset-1 populated: 1 files, avg. dir. width = 1, avg. dir. depth = -nan, 0 leafdirs, 1024.000MB total size
0.001: Removing fileset-1 tree (if exists)
0.002: Pre-allocating directories in fileset-1 tree
0.002: Pre-allocating files in fileset-1 tree
5.848: Waiting for pre-allocation to finish (in case of a parallel pre-allocation)
5.848: Population and pre-allocation of filesets completed
5.848: performing a checkpoint...
5.848: Sleeping...
15.850: Slept for 10 seconds...
15.850: clearing cached data...
15.852: Sleeping...
25.854: Slept for 10 seconds...
26.020: time sync
time sync 1651236483.280831935
26.039: time sync
26.039: current cache usage...
26.039: Attempting to create fileset more than once, ignoring
26.041: Starting 1 process-1 instances
27.050: Running...
167.061: Run took 140 seconds...
167.061: Per-Operation Breakdown
finish-1             0ops        0ops/s   0.0mb/s    0.000ms/op [0.000ms - 0.000ms]
close-1              0ops        0ops/s   0.0mb/s    0.000ms/op [0.000ms - 0.000ms]
read-1               62694855ops   447785ops/s 1749.2mb/s    0.001ms/op [0.001ms - 27.940ms]
open-1               1ops        0ops/s   0.0mb/s   33.465ms/op [33.465ms - 33.465ms]
167.061: IO Summary: 62694855 ops 447784.820 ops/s 447785/0 rd/wr 1749.2mb/s 0.001ms/op
167.061: Shutting down processes

# lazyfs run number 2

Filebench Version 1.5-alpha3
0.000: Allocated 177MB of shared memory
0.001: Populating and pre-allocating filesets
0.001: fileset-1 populated: 1 files, avg. dir. width = 1, avg. dir. depth = -nan, 0 leafdirs, 1024.000MB total size
0.001: Removing fileset-1 tree (if exists)
0.002: Pre-allocating directories in fileset-1 tree
0.003: Pre-allocating files in fileset-1 tree
6.433: Waiting for pre-allocation to finish (in case of a parallel pre-allocation)
6.433: Population and pre-allocation of filesets completed
6.433: performing a checkpoint...
6.434: Sleeping...
16.435: Slept for 10 seconds...
16.435: clearing cached data...
16.437: Sleeping...
26.438: Slept for 10 seconds...
26.604: time sync
time sync 1651236677.159253578
26.617: time sync
26.617: current cache usage...
26.617: Attempting to create fileset more than once, ignoring
26.617: Starting 1 process-1 instances
27.624: Running...
167.636: Run took 140 seconds...
167.636: Per-Operation Breakdown
finish-1             0ops        0ops/s   0.0mb/s    0.000ms/op [0.000ms - 0.000ms]
close-1              0ops        0ops/s   0.0mb/s    0.000ms/op [0.000ms - 0.000ms]
read-1               63615728ops   454361ops/s 1774.8mb/s    0.001ms/op [0.001ms - 29.222ms]
open-1               1ops        0ops/s   0.0mb/s   30.312ms/op [30.312ms - 30.312ms]
167.636: IO Summary: 63615729 ops 454361.430 ops/s 454361/0 rd/wr 1774.8mb/s 0.001ms/op
167.636: Shutting down processes

# lazyfs run number 3

Filebench Version 1.5-alpha3
0.000: Allocated 177MB of shared memory
0.001: Populating and pre-allocating filesets
0.001: fileset-1 populated: 1 files, avg. dir. width = 1, avg. dir. depth = -nan, 0 leafdirs, 1024.000MB total size
0.001: Removing fileset-1 tree (if exists)
0.003: Pre-allocating directories in fileset-1 tree
0.003: Pre-allocating files in fileset-1 tree
6.648: Waiting for pre-allocation to finish (in case of a parallel pre-allocation)
6.648: Population and pre-allocation of filesets completed
6.648: performing a checkpoint...
6.649: Sleeping...
16.650: Slept for 10 seconds...
16.650: clearing cached data...
16.651: Sleeping...
26.653: Slept for 10 seconds...
26.817: time sync
time sync 1651236871.229470755
26.830: time sync
26.830: current cache usage...
26.831: Attempting to create fileset more than once, ignoring
26.831: Starting 1 process-1 instances
27.848: Running...
167.859: Run took 140 seconds...
167.859: Per-Operation Breakdown
finish-1             0ops        0ops/s   0.0mb/s    0.000ms/op [0.000ms - 0.000ms]
close-1              0ops        0ops/s   0.0mb/s    0.000ms/op [0.000ms - 0.000ms]
read-1               63800280ops   455679ops/s 1780.0mb/s    0.001ms/op [0.001ms - 33.995ms]
open-1               1ops        0ops/s   0.0mb/s   26.894ms/op [26.894ms - 26.894ms]
167.859: IO Summary: 63800281 ops 455679.181 ops/s 455679/0 rd/wr 1780.0mb/s 0.001ms/op
167.859: Shutting down processes
