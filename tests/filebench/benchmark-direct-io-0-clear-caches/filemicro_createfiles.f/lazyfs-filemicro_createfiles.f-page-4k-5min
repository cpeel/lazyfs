# Test: 
#
# Commands:
#
#   ./setup-testbed.sh -d /tmp/lazyfs/fb-workload -f filemicro_createfiles.f.f
#   filebench -f filemicro_createfiles.f.f
#
# Description:
#
#   (Using standard page size in cache - 4kb / 4096 bytes)
# 
#   1. Clear all files from FS
#   2. Run filebench filemicro_createfiles.f.f
#   3. Get results

# Run 1


# Run 2


# Run 3


# lazyfs run number 1

Filebench Version 1.5-alpha3
0.000: Allocated 177MB of shared memory
0.001: Populating and pre-allocating filesets
0.182: fileset-1 populated: 500000 files, avg. dir. width = 1000, avg. dir. depth = 1.9, 0 leafdirs, 1953.125MB total size
0.182: Removing fileset-1 tree (if exists)
0.184: Pre-allocating directories in fileset-1 tree
0.211: Pre-allocating files in fileset-1 tree
1.498: Waiting for pre-allocation to finish (in case of a parallel pre-allocation)
1.498: Population and pre-allocation of filesets completed
1.498: performing a checkpoint...
1.499: Sleeping...
11.501: Slept for 10 seconds...
11.501: clearing cached data...
11.503: Sleeping...
21.504: Slept for 10 seconds...
21.526: time sync
time sync 1651328476.340748911
21.537: time sync
21.537: current cache usage...
21.538: Attempting to create fileset more than once, ignoring
21.538: Starting 1 process-1 instances
22.546: Running...
27.547: Per-Operation Breakdown
finishoncount-1      0ops        0ops/s   0.0mb/s    0.000ms/op [0.000ms - 0.000ms]
createwriteclose-1.closefile-1 7054ops     1411ops/s   0.0mb/s    0.007ms/op [0.002ms - 0.103ms]
createwriteclose-1.write-1 7054ops     1411ops/s   5.5mb/s    0.415ms/op [0.157ms - 4.425ms]
createwriteclose-1.createfile-1 7055ops     1411ops/s   0.0mb/s    0.271ms/op [0.072ms - 5.485ms]
createwriteclose-1   0ops        0ops/s   0.0mb/s    0.000ms/op [0.000ms - 0.000ms]
27.547: IO Summary: 21163 ops 4232.282 ops/s 0/1411 rd/wr   5.5mb/s 0.231ms/op

# lazyfs run number 2

Filebench Version 1.5-alpha3
0.000: Allocated 177MB of shared memory
0.001: Populating and pre-allocating filesets
0.181: fileset-1 populated: 500000 files, avg. dir. width = 1000, avg. dir. depth = 1.9, 0 leafdirs, 1953.125MB total size
0.181: Removing fileset-1 tree (if exists)
0.182: Pre-allocating directories in fileset-1 tree
0.213: Pre-allocating files in fileset-1 tree
1.430: Waiting for pre-allocation to finish (in case of a parallel pre-allocation)
1.430: Population and pre-allocation of filesets completed
1.430: performing a checkpoint...
1.430: Sleeping...
11.432: Slept for 10 seconds...
11.432: clearing cached data...
11.434: Sleeping...
21.435: Slept for 10 seconds...
21.458: time sync
time sync 1651328533.027568883
21.469: time sync
21.469: current cache usage...
21.469: Attempting to create fileset more than once, ignoring
21.469: Starting 1 process-1 instances
22.476: Running...
27.477: Per-Operation Breakdown
finishoncount-1      0ops        0ops/s   0.0mb/s    0.000ms/op [0.000ms - 0.000ms]
createwriteclose-1.closefile-1 7420ops     1484ops/s   0.0mb/s    0.006ms/op [0.002ms - 0.162ms]
createwriteclose-1.write-1 7420ops     1484ops/s   5.8mb/s    0.398ms/op [0.153ms - 4.351ms]
createwriteclose-1.createfile-1 7421ops     1484ops/s   0.0mb/s    0.256ms/op [0.070ms - 5.587ms]
createwriteclose-1   0ops        0ops/s   0.0mb/s    0.000ms/op [0.000ms - 0.000ms]
27.477: IO Summary: 22261 ops 4451.879 ops/s 0/1484 rd/wr   5.8mb/s 0.220ms/op

# lazyfs run number 3

Filebench Version 1.5-alpha3
0.000: Allocated 177MB of shared memory
0.001: Populating and pre-allocating filesets
0.181: fileset-1 populated: 500000 files, avg. dir. width = 1000, avg. dir. depth = 1.9, 0 leafdirs, 1953.125MB total size
0.181: Removing fileset-1 tree (if exists)
0.183: Pre-allocating directories in fileset-1 tree
0.212: Pre-allocating files in fileset-1 tree
1.443: Waiting for pre-allocation to finish (in case of a parallel pre-allocation)
1.443: Population and pre-allocation of filesets completed
1.443: performing a checkpoint...
1.443: Sleeping...
11.445: Slept for 10 seconds...
11.445: clearing cached data...
11.447: Sleeping...
21.449: Slept for 10 seconds...
21.472: time sync
time sync 1651328588.724691659
21.483: time sync
21.483: current cache usage...
21.483: Attempting to create fileset more than once, ignoring
21.483: Starting 1 process-1 instances
22.491: Running...
27.492: Per-Operation Breakdown
finishoncount-1      0ops        0ops/s   0.0mb/s    0.000ms/op [0.000ms - 0.000ms]
createwriteclose-1.closefile-1 6320ops     1264ops/s   0.0mb/s    0.008ms/op [0.002ms - 0.045ms]
createwriteclose-1.write-1 6320ops     1264ops/s   4.9mb/s    0.457ms/op [0.158ms - 4.120ms]
createwriteclose-1.createfile-1 6321ops     1264ops/s   0.0mb/s    0.310ms/op [0.071ms - 6.837ms]
createwriteclose-1   0ops        0ops/s   0.0mb/s    0.000ms/op [0.000ms - 0.000ms]
27.492: IO Summary: 18961 ops 3791.931 ops/s 0/1264 rd/wr   4.9mb/s 0.258ms/op
