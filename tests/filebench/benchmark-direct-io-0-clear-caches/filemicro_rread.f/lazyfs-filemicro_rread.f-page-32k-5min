# Test: 
#
# Commands:
#
#   ./setup-testbed.sh -d /tmp/lazyfs/fb-workload -f filemicro_rread.f.f
#   filebench -f filemicro_rread.f.f
#
# Description:
#
#   (Using page size in cache of size 32kb / 32768 bytes)
# 
#   1. Clear all files from FS
#   2. Run filebench filemicro_rread.f.f
#   3. Get results

# Run 1


# Run 2


# Run 3

# lazyfs run number 1

Filebench Version 1.5-alpha3
0.000: Allocated 177MB of shared memory
0.001: Populating and pre-allocating filesets
0.001: fileset-1 populated: 1 files, avg. dir. width = 1, avg. dir. depth = -nan, 0 leafdirs, 1024.000MB total size
0.001: Removing fileset-1 tree (if exists)
0.003: Pre-allocating directories in fileset-1 tree
0.003: Pre-allocating files in fileset-1 tree
1.643: Waiting for pre-allocation to finish (in case of a parallel pre-allocation)
1.643: Population and pre-allocation of filesets completed
1.643: performing a checkpoint...
1.644: Sleeping...
11.646: Slept for 10 seconds...
11.646: clearing cached data...
11.648: Sleeping...
21.650: Slept for 10 seconds...
21.781: time sync
time sync 1651264631.021596445
21.793: time sync
21.793: current cache usage...
21.794: Attempting to create fileset more than once, ignoring
21.794: Starting 1 process-1 instances
22.805: Running...
190.819: Run took 168 seconds...
190.819: Per-Operation Breakdown
finish-1             1ops        0ops/s   0.0mb/s    0.000ms/op [0.000ms - 0.000ms]
close-1              1ops        0ops/s   0.0mb/s    0.012ms/op [0.012ms - 0.012ms]
read-1               67108864ops   399425ops/s 1560.3mb/s    0.001ms/op [0.001ms - 15.292ms]
open-1               1ops        0ops/s   0.0mb/s    2.803ms/op [2.803ms - 2.803ms]
190.819: IO Summary: 67108866 ops 399425.087 ops/s 399425/0 rd/wr 1560.3mb/s 0.001ms/op
190.819: Shutting down processes

# lazyfs run number 2

Filebench Version 1.5-alpha3
0.000: Allocated 177MB of shared memory
0.001: Populating and pre-allocating filesets
0.001: fileset-1 populated: 1 files, avg. dir. width = 1, avg. dir. depth = -nan, 0 leafdirs, 1024.000MB total size
0.001: Removing fileset-1 tree (if exists)
0.003: Pre-allocating directories in fileset-1 tree
0.003: Pre-allocating files in fileset-1 tree
1.524: Waiting for pre-allocation to finish (in case of a parallel pre-allocation)
1.524: Population and pre-allocation of filesets completed
1.524: performing a checkpoint...
1.525: Sleeping...
11.527: Slept for 10 seconds...
11.527: clearing cached data...
11.528: Sleeping...
21.530: Slept for 10 seconds...
21.706: time sync
time sync 1651264848.051174017
21.717: time sync
21.718: current cache usage...
21.718: Attempting to create fileset more than once, ignoring
21.722: Starting 1 process-1 instances
22.730: Running...
205.745: Run took 183 seconds...
205.745: Per-Operation Breakdown
finish-1             1ops        0ops/s   0.0mb/s    0.001ms/op [0.001ms - 0.001ms]
close-1              1ops        0ops/s   0.0mb/s    0.013ms/op [0.013ms - 0.013ms]
read-1               67108864ops   366685ops/s 1432.4mb/s    0.001ms/op [0.001ms - 7.128ms]
open-1               1ops        0ops/s   0.0mb/s    2.889ms/op [2.889ms - 2.889ms]
205.745: IO Summary: 67108866 ops 366685.257 ops/s 366685/0 rd/wr 1432.4mb/s 0.001ms/op
205.746: Shutting down processes

# lazyfs run number 3

Filebench Version 1.5-alpha3
0.000: Allocated 177MB of shared memory
0.001: Populating and pre-allocating filesets
0.001: fileset-1 populated: 1 files, avg. dir. width = 1, avg. dir. depth = -nan, 0 leafdirs, 1024.000MB total size
0.001: Removing fileset-1 tree (if exists)
0.003: Pre-allocating directories in fileset-1 tree
0.003: Pre-allocating files in fileset-1 tree
1.404: Waiting for pre-allocation to finish (in case of a parallel pre-allocation)
1.404: Population and pre-allocation of filesets completed
1.404: performing a checkpoint...
1.405: Sleeping...
11.406: Slept for 10 seconds...
11.406: clearing cached data...
11.408: Sleeping...
21.410: Slept for 10 seconds...
21.573: time sync
time sync 1651265079.953431932
21.584: time sync
21.585: current cache usage...
21.585: Attempting to create fileset more than once, ignoring
21.585: Starting 1 process-1 instances
22.593: Running...
209.608: Run took 187 seconds...
209.609: Per-Operation Breakdown
finish-1             1ops        0ops/s   0.0mb/s    0.000ms/op [0.000ms - 0.000ms]
close-1              1ops        0ops/s   0.0mb/s    0.013ms/op [0.013ms - 0.013ms]
read-1               67108864ops   358842ops/s 1401.7mb/s    0.001ms/op [0.001ms - 7.198ms]
open-1               1ops        0ops/s   0.0mb/s   12.385ms/op [12.385ms - 12.385ms]
209.609: IO Summary: 67108866 ops 358842.493 ops/s 358842/0 rd/wr 1401.7mb/s 0.001ms/op
209.609: Shutting down processes
