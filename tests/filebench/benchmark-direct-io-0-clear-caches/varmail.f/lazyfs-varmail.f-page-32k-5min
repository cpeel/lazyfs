# Test: 
#
# Commands:
#
#   ./setup-testbed.sh -d /tmp/lazyfs/fb-workload -f varmail.f.f
#   filebench -f varmail.f.f
#
# Description:
#
#   (Using page size in cache of size 32kb / 32768 bytes)
# 
#   1. Clear all files from FS
#   2. Run filebench varmail.f.f
#   3. Get results

# Run 1


# Run 2


# Run 3


# lazyfs run number 1

Filebench Version 1.5-alpha3
0.000: Allocated 177MB of shared memory
0.001: Varmail Version 3.0 personality successfully loaded
0.001: performing a checkpoint...
0.002: Sleeping...
10.003: Slept for 10 seconds...
10.003: clearing cached data...
10.006: Sleeping...
20.007: Slept for 10 seconds...
20.028: time sync
time sync 1651325359.626060556
20.040: time sync
20.040: current cache usage...
20.041: Populating and pre-allocating filesets
20.043: bigfileset populated: 1000 files, avg. dir. width = 1000000, avg. dir. depth = 0.5, 0 leafdirs, 14.959MB total size
20.043: Removing bigfileset tree (if exists)
20.046: Pre-allocating directories in bigfileset tree
20.046: Pre-allocating files in bigfileset tree
20.392: Waiting for pre-allocation to finish (in case of a parallel pre-allocation)
20.392: Population and pre-allocation of filesets completed
20.392: Starting 1 filereader instances
21.408: Running...
321.429: Run took 300 seconds...
321.429: Per-Operation Breakdown
closefile4           244413ops      815ops/s   0.0mb/s    0.005ms/op [0.001ms - 0.093ms]
readfile4            244413ops      815ops/s  12.8mb/s    0.146ms/op [0.038ms - 0.588ms]
openfile4            244413ops      815ops/s   0.0mb/s    0.052ms/op [0.019ms - 0.366ms]
closefile3           244413ops      815ops/s   0.0mb/s    0.005ms/op [0.002ms - 0.101ms]
fsyncfile3           244413ops      815ops/s   0.0mb/s    0.071ms/op [0.022ms - 15.671ms]
appendfilerand3      244413ops      815ops/s   6.4mb/s    0.122ms/op [0.064ms - 1.037ms]
readfile3            244413ops      815ops/s   6.4mb/s    0.113ms/op [0.013ms - 0.479ms]
openfile3            244413ops      815ops/s   0.0mb/s    0.052ms/op [0.018ms - 1.889ms]
closefile2           244413ops      815ops/s   0.0mb/s    0.006ms/op [0.002ms - 0.093ms]
fsyncfile2           244413ops      815ops/s   0.0mb/s    0.075ms/op [0.019ms - 1.876ms]
appendfilerand2      244413ops      815ops/s   6.4mb/s    0.175ms/op [0.001ms - 0.717ms]
createfile2          244414ops      815ops/s   0.0mb/s    0.160ms/op [0.067ms - 2.261ms]
deletefile1          244414ops      815ops/s   0.0mb/s    0.191ms/op [0.087ms - 2.391ms]
321.429: IO Summary: 3177371 ops 10590.531 ops/s 1629/1629 rd/wr  31.9mb/s 0.090ms/op
321.429: Shutting down processes

# lazyfs run number 2

Filebench Version 1.5-alpha3
0.000: Allocated 177MB of shared memory
0.001: Varmail Version 3.0 personality successfully loaded
0.001: performing a checkpoint...
0.002: Sleeping...
10.003: Slept for 10 seconds...
10.004: clearing cached data...
10.006: Sleeping...
20.007: Slept for 10 seconds...
20.027: time sync
time sync 1651325707.181768827
20.038: time sync
20.038: current cache usage...
20.039: Populating and pre-allocating filesets
20.041: bigfileset populated: 1000 files, avg. dir. width = 1000000, avg. dir. depth = 0.5, 0 leafdirs, 14.959MB total size
20.041: Removing bigfileset tree (if exists)
20.043: Pre-allocating directories in bigfileset tree
20.043: Pre-allocating files in bigfileset tree
20.520: Waiting for pre-allocation to finish (in case of a parallel pre-allocation)
20.520: Population and pre-allocation of filesets completed
20.520: Starting 1 filereader instances
21.541: Running...
321.561: Run took 300 seconds...
321.561: Per-Operation Breakdown
closefile4           264634ops      882ops/s   0.0mb/s    0.005ms/op [0.001ms - 0.072ms]
readfile4            264634ops      882ops/s  13.8mb/s    0.135ms/op [0.040ms - 1.308ms]
openfile4            264634ops      882ops/s   0.0mb/s    0.048ms/op [0.019ms - 0.793ms]
closefile3           264634ops      882ops/s   0.0mb/s    0.005ms/op [0.001ms - 0.085ms]
fsyncfile3           264634ops      882ops/s   0.0mb/s    0.067ms/op [0.022ms - 1.860ms]
appendfilerand3      264634ops      882ops/s   6.9mb/s    0.114ms/op [0.064ms - 1.683ms]
readfile3            264634ops      882ops/s   6.9mb/s    0.103ms/op [0.013ms - 0.442ms]
openfile3            264634ops      882ops/s   0.0mb/s    0.048ms/op [0.018ms - 0.612ms]
closefile2           264634ops      882ops/s   0.0mb/s    0.005ms/op [0.002ms - 0.076ms]
fsyncfile2           264634ops      882ops/s   0.0mb/s    0.070ms/op [0.024ms - 1.905ms]
appendfilerand2      264634ops      882ops/s   6.9mb/s    0.163ms/op [0.001ms - 3.822ms]
createfile2          264634ops      882ops/s   0.0mb/s    0.146ms/op [0.068ms - 3.490ms]
deletefile1          264634ops      882ops/s   0.0mb/s    0.173ms/op [0.087ms - 1.985ms]
321.561: IO Summary: 3440242 ops 11466.709 ops/s 1764/1764 rd/wr  34.5mb/s 0.083ms/op
321.561: Shutting down processes

# lazyfs run number 3

Filebench Version 1.5-alpha3
0.000: Allocated 177MB of shared memory
0.001: Varmail Version 3.0 personality successfully loaded
0.001: performing a checkpoint...
0.002: Sleeping...
10.003: Slept for 10 seconds...
10.003: clearing cached data...
10.005: Sleeping...
20.007: Slept for 10 seconds...
20.029: time sync
time sync 1651326054.862461186
20.040: time sync
20.040: current cache usage...
20.041: Populating and pre-allocating filesets
20.044: bigfileset populated: 1000 files, avg. dir. width = 1000000, avg. dir. depth = 0.5, 0 leafdirs, 14.959MB total size
20.044: Removing bigfileset tree (if exists)
20.047: Pre-allocating directories in bigfileset tree
20.048: Pre-allocating files in bigfileset tree
20.436: Waiting for pre-allocation to finish (in case of a parallel pre-allocation)
20.436: Population and pre-allocation of filesets completed
20.436: Starting 1 filereader instances
21.451: Running...
321.471: Run took 300 seconds...
321.471: Per-Operation Breakdown
closefile4           243164ops      810ops/s   0.0mb/s    0.005ms/op [0.001ms - 0.080ms]
readfile4            243164ops      810ops/s  12.7mb/s    0.146ms/op [0.042ms - 0.523ms]
openfile4            243165ops      810ops/s   0.0mb/s    0.052ms/op [0.019ms - 0.328ms]
closefile3           243165ops      810ops/s   0.0mb/s    0.005ms/op [0.001ms - 0.084ms]
fsyncfile3           243165ops      810ops/s   0.0mb/s    0.071ms/op [0.021ms - 1.838ms]
appendfilerand3      243165ops      810ops/s   6.3mb/s    0.123ms/op [0.061ms - 0.603ms]
readfile3            243165ops      810ops/s   6.4mb/s    0.114ms/op [0.017ms - 0.628ms]
openfile3            243165ops      810ops/s   0.0mb/s    0.053ms/op [0.019ms - 3.781ms]
closefile2           243165ops      810ops/s   0.0mb/s    0.006ms/op [0.002ms - 0.114ms]
fsyncfile2           243165ops      810ops/s   0.0mb/s    0.075ms/op [0.022ms - 2.600ms]
appendfilerand2      243165ops      810ops/s   6.3mb/s    0.175ms/op [0.085ms - 0.763ms]
createfile2          243165ops      810ops/s   0.0mb/s    0.161ms/op [0.068ms - 2.275ms]
deletefile1          243165ops      810ops/s   0.0mb/s    0.192ms/op [0.087ms - 2.453ms]
321.471: IO Summary: 3161143 ops 10536.438 ops/s 1621/1621 rd/wr  31.7mb/s 0.091ms/op
321.471: Shutting down processes
