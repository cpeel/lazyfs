# Test: 
#
# Commands:
#
#   ./setup-testbed.sh -d /tmp/lazyfs/fb-workload -f webserver.f.f
#   filebench -f webserver.f.f
#
# Description:
#
#   (Using page size in cache of size 32kb / 32768 bytes)
# 
#   1. Clear all files from FS
#   2. Run filebench webserver.f.f
#   3. Get results

# Run 1


# Run 2


# Run 3


# lazyfs run number 1

Filebench Version 1.5-alpha3
0.000: Allocated 177MB of shared memory
0.002: Web-server Version 3.1 personality successfully loaded
0.002: performing a checkpoint...
0.002: Sleeping...
10.004: Slept for 10 seconds...
10.004: clearing cached data...
10.006: Sleeping...
20.008: Slept for 10 seconds...
20.025: time sync
time sync 1651326432.463023705
20.036: time sync
20.036: current cache usage...
20.036: Populating and pre-allocating filesets
20.038: logfiles populated: 1 files, avg. dir. width = 20, avg. dir. depth = 0.0, 0 leafdirs, 0.002MB total size
20.038: Removing logfiles tree (if exists)
20.040: Pre-allocating directories in logfiles tree
20.040: Pre-allocating files in logfiles tree
20.045: bigfileset populated: 1000 files, avg. dir. width = 20, avg. dir. depth = 2.3, 0 leafdirs, 14.760MB total size
20.045: Removing bigfileset tree (if exists)
20.047: Pre-allocating directories in bigfileset tree
20.053: Pre-allocating files in bigfileset tree
20.552: Waiting for pre-allocation to finish (in case of a parallel pre-allocation)
20.552: Population and pre-allocation of filesets completed
20.553: Starting 1 filereader instances
21.569: Running...
321.589: Run took 300 seconds...
321.590: Per-Operation Breakdown
appendlog            134584ops      449ops/s   3.5mb/s    0.302ms/op [0.113ms - 10.257ms]
closefile10          134583ops      449ops/s   0.0mb/s    0.005ms/op [0.002ms - 0.089ms]
readfile10           134583ops      449ops/s   6.5mb/s    0.112ms/op [0.029ms - 3.207ms]
openfile10           134583ops      449ops/s   0.0mb/s    0.059ms/op [0.020ms - 0.223ms]
closefile9           134583ops      449ops/s   0.0mb/s    0.005ms/op [0.002ms - 0.094ms]
readfile9            134583ops      449ops/s   6.3mb/s    0.109ms/op [0.031ms - 0.690ms]
openfile9            134583ops      449ops/s   0.0mb/s    0.059ms/op [0.020ms - 1.628ms]
closefile8           134583ops      449ops/s   0.0mb/s    0.005ms/op [0.002ms - 0.106ms]
readfile8            134583ops      449ops/s   6.8mb/s    0.115ms/op [0.031ms - 0.511ms]
openfile8            134583ops      449ops/s   0.0mb/s    0.060ms/op [0.019ms - 0.501ms]
closefile7           134583ops      449ops/s   0.0mb/s    0.005ms/op [0.002ms - 0.092ms]
readfile7            134583ops      449ops/s   6.9mb/s    0.118ms/op [0.030ms - 0.719ms]
openfile7            134583ops      449ops/s   0.0mb/s    0.059ms/op [0.020ms - 0.578ms]
closefile6           134583ops      449ops/s   0.0mb/s    0.005ms/op [0.002ms - 0.101ms]
readfile6            134583ops      449ops/s   6.9mb/s    0.114ms/op [0.030ms - 0.489ms]
openfile6            134583ops      449ops/s   0.0mb/s    0.059ms/op [0.022ms - 0.389ms]
closefile5           134583ops      449ops/s   0.0mb/s    0.005ms/op [0.002ms - 0.110ms]
readfile5            134583ops      449ops/s   6.0mb/s    0.110ms/op [0.030ms - 0.427ms]
openfile5            134583ops      449ops/s   0.0mb/s    0.060ms/op [0.021ms - 0.307ms]
closefile4           134583ops      449ops/s   0.0mb/s    0.005ms/op [0.002ms - 0.115ms]
readfile4            134584ops      449ops/s   6.5mb/s    0.114ms/op [0.032ms - 0.741ms]
openfile4            134584ops      449ops/s   0.0mb/s    0.061ms/op [0.021ms - 3.720ms]
closefile3           134584ops      449ops/s   0.0mb/s    0.005ms/op [0.002ms - 0.116ms]
readfile3            134584ops      449ops/s   7.6mb/s    0.124ms/op [0.032ms - 0.461ms]
openfile3            134584ops      449ops/s   0.0mb/s    0.060ms/op [0.021ms - 0.423ms]
closefile2           134584ops      449ops/s   0.0mb/s    0.005ms/op [0.002ms - 0.124ms]
readfile2            134584ops      449ops/s   6.6mb/s    0.113ms/op [0.032ms - 0.662ms]
openfile2            134584ops      449ops/s   0.0mb/s    0.060ms/op [0.021ms - 0.442ms]
closefile1           134584ops      449ops/s   0.0mb/s    0.005ms/op [0.002ms - 0.111ms]
readfile1            134584ops      449ops/s   6.3mb/s    0.115ms/op [0.033ms - 1.987ms]
openfile1            134584ops      449ops/s   0.0mb/s    0.063ms/op [0.021ms - 0.630ms]
321.590: IO Summary: 4172085 ops 13906.028 ops/s 4486/449 rd/wr  69.7mb/s 0.068ms/op
321.590: Shutting down processes

# lazyfs run number 2

Filebench Version 1.5-alpha3
0.000: Allocated 177MB of shared memory
0.002: Web-server Version 3.1 personality successfully loaded
0.002: performing a checkpoint...
0.002: Sleeping...
10.004: Slept for 10 seconds...
10.004: clearing cached data...
10.006: Sleeping...
20.008: Slept for 10 seconds...
20.026: time sync
time sync 1651326780.178910202
20.037: time sync
20.037: current cache usage...
20.038: Populating and pre-allocating filesets
20.040: logfiles populated: 1 files, avg. dir. width = 20, avg. dir. depth = 0.0, 0 leafdirs, 0.002MB total size
20.040: Removing logfiles tree (if exists)
20.043: Pre-allocating directories in logfiles tree
20.043: Pre-allocating files in logfiles tree
20.048: bigfileset populated: 1000 files, avg. dir. width = 20, avg. dir. depth = 2.3, 0 leafdirs, 14.760MB total size
20.048: Removing bigfileset tree (if exists)
20.050: Pre-allocating directories in bigfileset tree
20.056: Pre-allocating files in bigfileset tree
20.674: Waiting for pre-allocation to finish (in case of a parallel pre-allocation)
20.674: Population and pre-allocation of filesets completed
20.674: Starting 1 filereader instances
21.694: Running...
321.715: Run took 300 seconds...
321.715: Per-Operation Breakdown
appendlog            135503ops      452ops/s   3.5mb/s    0.301ms/op [0.105ms - 10.314ms]
closefile10          135502ops      452ops/s   0.0mb/s    0.005ms/op [0.002ms - 0.105ms]
readfile10           135502ops      452ops/s   6.5mb/s    0.111ms/op [0.032ms - 0.472ms]
openfile10           135502ops      452ops/s   0.0mb/s    0.059ms/op [0.021ms - 0.797ms]
closefile9           135502ops      452ops/s   0.0mb/s    0.005ms/op [0.002ms - 0.109ms]
readfile9            135502ops      452ops/s   6.3mb/s    0.109ms/op [0.034ms - 0.470ms]
openfile9            135502ops      452ops/s   0.0mb/s    0.059ms/op [0.022ms - 0.241ms]
closefile8           135502ops      452ops/s   0.0mb/s    0.005ms/op [0.002ms - 0.107ms]
readfile8            135502ops      452ops/s   6.8mb/s    0.114ms/op [0.032ms - 0.382ms]
openfile8            135503ops      452ops/s   0.0mb/s    0.059ms/op [0.021ms - 0.434ms]
closefile7           135503ops      452ops/s   0.0mb/s    0.005ms/op [0.001ms - 0.106ms]
readfile7            135503ops      452ops/s   7.0mb/s    0.118ms/op [0.029ms - 0.436ms]
openfile7            135503ops      452ops/s   0.0mb/s    0.059ms/op [0.021ms - 0.232ms]
closefile6           135503ops      452ops/s   0.0mb/s    0.005ms/op [0.002ms - 0.101ms]
readfile6            135503ops      452ops/s   6.9mb/s    0.113ms/op [0.032ms - 0.915ms]
openfile6            135503ops      452ops/s   0.0mb/s    0.059ms/op [0.021ms - 0.688ms]
closefile5           135503ops      452ops/s   0.0mb/s    0.005ms/op [0.002ms - 0.095ms]
readfile5            135503ops      452ops/s   6.0mb/s    0.109ms/op [0.031ms - 0.442ms]
openfile5            135503ops      452ops/s   0.0mb/s    0.059ms/op [0.020ms - 0.234ms]
closefile4           135503ops      452ops/s   0.0mb/s    0.005ms/op [0.001ms - 0.092ms]
readfile4            135503ops      452ops/s   6.5mb/s    0.113ms/op [0.031ms - 0.454ms]
openfile4            135503ops      452ops/s   0.0mb/s    0.060ms/op [0.021ms - 0.201ms]
closefile3           135503ops      452ops/s   0.0mb/s    0.005ms/op [0.002ms - 0.116ms]
readfile3            135503ops      452ops/s   7.7mb/s    0.123ms/op [0.033ms - 0.563ms]
openfile3            135503ops      452ops/s   0.0mb/s    0.059ms/op [0.021ms - 0.246ms]
closefile2           135503ops      452ops/s   0.0mb/s    0.005ms/op [0.002ms - 0.113ms]
readfile2            135503ops      452ops/s   6.6mb/s    0.112ms/op [0.034ms - 0.646ms]
openfile2            135503ops      452ops/s   0.0mb/s    0.060ms/op [0.021ms - 0.618ms]
closefile1           135503ops      452ops/s   0.0mb/s    0.005ms/op [0.002ms - 0.093ms]
readfile1            135503ops      452ops/s   6.3mb/s    0.114ms/op [0.037ms - 2.025ms]
openfile1            135503ops      452ops/s   0.0mb/s    0.062ms/op [0.022ms - 0.566ms]
321.715: IO Summary: 4200585 ops 14001.025 ops/s 4516/452 rd/wr  70.2mb/s 0.067ms/op
321.715: Shutting down processes

# lazyfs run number 3

Filebench Version 1.5-alpha3
0.000: Allocated 177MB of shared memory
0.002: Web-server Version 3.1 personality successfully loaded
0.002: performing a checkpoint...
0.002: Sleeping...
10.004: Slept for 10 seconds...
10.004: clearing cached data...
10.006: Sleeping...
20.008: Slept for 10 seconds...
20.028: time sync
time sync 1651327128.021877214
20.039: time sync
20.039: current cache usage...
20.039: Populating and pre-allocating filesets
20.042: logfiles populated: 1 files, avg. dir. width = 20, avg. dir. depth = 0.0, 0 leafdirs, 0.002MB total size
20.042: Removing logfiles tree (if exists)
20.044: Pre-allocating directories in logfiles tree
20.045: Pre-allocating files in logfiles tree
20.049: bigfileset populated: 1000 files, avg. dir. width = 20, avg. dir. depth = 2.3, 0 leafdirs, 14.760MB total size
20.049: Removing bigfileset tree (if exists)
20.051: Pre-allocating directories in bigfileset tree
20.057: Pre-allocating files in bigfileset tree
20.746: Waiting for pre-allocation to finish (in case of a parallel pre-allocation)
20.746: Population and pre-allocation of filesets completed
20.746: Starting 1 filereader instances
21.758: Running...
321.778: Run took 300 seconds...
321.778: Per-Operation Breakdown
appendlog            146963ops      490ops/s   3.8mb/s    0.276ms/op [0.084ms - 9.811ms]
closefile10          146963ops      490ops/s   0.0mb/s    0.005ms/op [0.002ms - 0.100ms]
readfile10           146963ops      490ops/s   7.1mb/s    0.102ms/op [0.035ms - 0.355ms]
openfile10           146963ops      490ops/s   0.0mb/s    0.055ms/op [0.022ms - 0.253ms]
closefile9           146963ops      490ops/s   0.0mb/s    0.005ms/op [0.002ms - 0.113ms]
readfile9            146963ops      490ops/s   6.9mb/s    0.100ms/op [0.034ms - 0.492ms]
openfile9            146963ops      490ops/s   0.0mb/s    0.055ms/op [0.022ms - 0.351ms]
closefile8           146963ops      490ops/s   0.0mb/s    0.005ms/op [0.002ms - 0.090ms]
readfile8            146963ops      490ops/s   7.4mb/s    0.105ms/op [0.031ms - 0.353ms]
openfile8            146963ops      490ops/s   0.0mb/s    0.055ms/op [0.023ms - 0.290ms]
closefile7           146963ops      490ops/s   0.0mb/s    0.005ms/op [0.002ms - 0.107ms]
readfile7            146963ops      490ops/s   7.6mb/s    0.108ms/op [0.032ms - 0.463ms]
openfile7            146963ops      490ops/s   0.0mb/s    0.055ms/op [0.023ms - 1.384ms]
closefile6           146963ops      490ops/s   0.0mb/s    0.005ms/op [0.001ms - 0.107ms]
readfile6            146963ops      490ops/s   7.5mb/s    0.104ms/op [0.034ms - 0.783ms]
openfile6            146963ops      490ops/s   0.0mb/s    0.055ms/op [0.023ms - 0.336ms]
closefile5           146963ops      490ops/s   0.0mb/s    0.005ms/op [0.002ms - 0.087ms]
readfile5            146963ops      490ops/s   6.5mb/s    0.100ms/op [0.031ms - 0.425ms]
openfile5            146963ops      490ops/s   0.0mb/s    0.055ms/op [0.023ms - 0.208ms]
closefile4           146963ops      490ops/s   0.0mb/s    0.005ms/op [0.002ms - 0.104ms]
readfile4            146963ops      490ops/s   7.1mb/s    0.103ms/op [0.032ms - 0.910ms]
openfile4            146963ops      490ops/s   0.0mb/s    0.056ms/op [0.022ms - 0.262ms]
closefile3           146963ops      490ops/s   0.0mb/s    0.005ms/op [0.002ms - 0.122ms]
readfile3            146963ops      490ops/s   8.3mb/s    0.113ms/op [0.033ms - 0.475ms]
openfile3            146963ops      490ops/s   0.0mb/s    0.056ms/op [0.023ms - 0.762ms]
closefile2           146963ops      490ops/s   0.0mb/s    0.005ms/op [0.002ms - 0.104ms]
readfile2            146963ops      490ops/s   7.2mb/s    0.103ms/op [0.036ms - 0.472ms]
openfile2            146963ops      490ops/s   0.0mb/s    0.056ms/op [0.024ms - 0.644ms]
closefile1           146963ops      490ops/s   0.0mb/s    0.005ms/op [0.002ms - 0.125ms]
readfile1            146963ops      490ops/s   6.8mb/s    0.104ms/op [0.039ms - 1.959ms]
openfile1            146963ops      490ops/s   0.0mb/s    0.057ms/op [0.022ms - 0.791ms]
321.778: IO Summary: 4555853 ops 15185.186 ops/s 4898/490 rd/wr  76.1mb/s 0.062ms/op
321.778: Shutting down processes
