# Test: 
#
# Commands:
#
#   ./setup-testbed.sh -d /tmp/lazyfs/fb-workload -f filemicro_seqwrite.f.f
#   filebench -f filemicro_seqwrite.f.f
#
# Description:
#
#   (Using page size in cache of size 32kb / 32768 bytes)
# 
#   1. Clear all files from FS
#   2. Run filebench filemicro_seqwrite.f.f
#   3. Get results

# Run 1


# Run 2


# Run 3


# lazyfs run number 1

Filebench Version 1.5-alpha3
0.000: Allocated 177MB of shared memory
0.006: Populating and pre-allocating filesets
0.006: fileset-1 populated: 1 files, avg. dir. width = 1, avg. dir. depth = -nan, 0 leafdirs, 1024.000MB total size
0.006: Removing fileset-1 tree (if exists)
0.007: Pre-allocating directories in fileset-1 tree
0.008: Pre-allocating files in fileset-1 tree
0.008: Waiting for pre-allocation to finish (in case of a parallel pre-allocation)
0.008: Population and pre-allocation of filesets completed
0.008: performing a checkpoint...
0.008: Sleeping...
10.010: Slept for 10 seconds...
10.010: clearing cached data...
10.011: Sleeping...
20.013: Slept for 10 seconds...
20.061: time sync
time sync 1651323195.817908403
20.072: time sync
20.072: current cache usage...
20.073: Attempting to create fileset more than once, ignoring
20.073: Starting 1 process-1 instances
21.086: Running...
321.105: Run took 300 seconds...
321.107: Per-Operation Breakdown
finish-1             0ops        0ops/s   0.0mb/s    0.000ms/op [0.000ms - 0.000ms]
close-1              0ops        0ops/s   0.0mb/s    0.000ms/op [0.000ms - 0.000ms]
write-1              4232416ops    14107ops/s  55.1mb/s    0.069ms/op [0.015ms - 78.423ms]
create-1             1ops        0ops/s   0.0mb/s    5.344ms/op [5.344ms - 5.344ms]
321.107: IO Summary: 4232417 ops 14107.074 ops/s 0/14107 rd/wr  55.1mb/s 0.069ms/op
321.107: Shutting down processes

# lazyfs run number 2

Filebench Version 1.5-alpha3
0.000: Allocated 177MB of shared memory
0.005: Populating and pre-allocating filesets
0.005: fileset-1 populated: 1 files, avg. dir. width = 1, avg. dir. depth = -nan, 0 leafdirs, 1024.000MB total size
0.005: Removing fileset-1 tree (if exists)
0.006: Pre-allocating directories in fileset-1 tree
0.007: Pre-allocating files in fileset-1 tree
0.007: Waiting for pre-allocation to finish (in case of a parallel pre-allocation)
0.007: Population and pre-allocation of filesets completed
0.007: performing a checkpoint...
0.007: Sleeping...
10.009: Slept for 10 seconds...
10.009: clearing cached data...
10.011: Sleeping...
20.013: Slept for 10 seconds...
20.035: time sync
time sync 1651323543.736083685
20.047: time sync
20.047: current cache usage...
20.048: Attempting to create fileset more than once, ignoring
20.048: Starting 1 process-1 instances
21.074: Running...
321.093: Run took 300 seconds...
321.094: Per-Operation Breakdown
finish-1             0ops        0ops/s   0.0mb/s    0.000ms/op [0.000ms - 0.000ms]
close-1              0ops        0ops/s   0.0mb/s    0.000ms/op [0.000ms - 0.000ms]
write-1              4102147ops    13673ops/s  53.4mb/s    0.071ms/op [0.025ms - 90.269ms]
create-1             1ops        0ops/s   0.0mb/s    6.125ms/op [6.125ms - 6.125ms]
321.094: IO Summary: 4102148 ops 13672.925 ops/s 0/13673 rd/wr  53.4mb/s 0.071ms/op
321.094: Shutting down processes

# lazyfs run number 3

Filebench Version 1.5-alpha3
0.000: Allocated 177MB of shared memory
0.005: Populating and pre-allocating filesets
0.005: fileset-1 populated: 1 files, avg. dir. width = 1, avg. dir. depth = -nan, 0 leafdirs, 1024.000MB total size
0.005: Removing fileset-1 tree (if exists)
0.006: Pre-allocating directories in fileset-1 tree
0.006: Pre-allocating files in fileset-1 tree
0.006: Waiting for pre-allocation to finish (in case of a parallel pre-allocation)
0.006: Population and pre-allocation of filesets completed
0.006: performing a checkpoint...
0.007: Sleeping...
10.009: Slept for 10 seconds...
10.009: clearing cached data...
10.011: Sleeping...
20.012: Slept for 10 seconds...
20.031: time sync
time sync 1651323891.630703034
20.043: time sync
20.043: current cache usage...
20.044: Attempting to create fileset more than once, ignoring
20.044: Starting 1 process-1 instances
21.052: Running...
321.071: Run took 300 seconds...
321.072: Per-Operation Breakdown
finish-1             0ops        0ops/s   0.0mb/s    0.000ms/op [0.000ms - 0.000ms]
close-1              0ops        0ops/s   0.0mb/s    0.000ms/op [0.000ms - 0.000ms]
write-1              4152314ops    13840ops/s  54.1mb/s    0.071ms/op [0.015ms - 110.968ms]
create-1             1ops        0ops/s   0.0mb/s    5.487ms/op [5.487ms - 5.487ms]
321.072: IO Summary: 4152315 ops 13840.170 ops/s 0/13840 rd/wr  54.1mb/s 0.071ms/op
321.072: Shutting down processes
